<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<!-- iOS / PWA -->
<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no,
               viewport-fit=cover">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Questions">

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">

<title>Questions</title>

<style>
/* –ë–ê–ó–ê */
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
}

/* BODY */
body {
    color: red;
    font-family: Arial, sans-serif;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent; /* ‚ùó —É–±–∏—Ä–∞–µ–º iOS highlight */
}

/* üü• STATUS BAR */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top);
    background: black;
    z-index: 9999;
    pointer-events: none;
}

/* üü• HOME INDICATOR */
body::after {
    content: "";
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: env(safe-area-inset-bottom);
    background: black;
    z-index: 9999;
    pointer-events: none;
}

/* –¶–ï–ù–¢–† */
#container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

/* –í–û–ü–†–û–° */
#question {
    font-size: 32px;
    min-height: 80px;
    cursor: pointer;
    user-select: none;
    display: none;
    letter-spacing: 1px;
}

/* üî¥ –ö–ù–û–ü–ö–ê ‚Äî –ß–ò–°–¢–´–ô –¢–ï–ö–°–¢ */
button {
    font-size: 24px;
    padding: 20px 50px;
    background: transparent;     /* ‚ùå –Ω–∏–∫–∞–∫–æ–π –∑–∞–ª–∏–≤–∫–∏ */
    color: red;
    border: none;                /* ‚ùå –Ω–∏–∫–∞–∫–æ–π —Ä–∞–º–∫–∏ */
    outline: none;
    cursor: pointer;
}

/* ‚ùå –£–ë–ò–†–ê–ï–ú –í–°–ï ACTIVE / FOCUS –≠–§–§–ï–ö–¢–´ */
button:active,
button:focus,
button:focus-visible {
    background: transparent;
    color: red;
    outline: none;
    box-shadow: none;
}
</style>
</head>

<body>

<div id="container">
    <div id="question"></div>
    <button id="startButton">–°—Ç–∞—Ä—Ç</button>
</div>

<script>
// –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ iOS-–∑—É–º-–∂–µ—Å—Ç–æ–≤
document.addEventListener('gesturestart', e => e.preventDefault());

// service worker
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
}

const finalQuestion =
    "–ö–∞–∫–æ–π –≤–æ–ø—Ä–æ—Å —Ç—ã —Å–∞–º(–∞) —Ö–æ—Ç–µ–ª(–∞) –±—ã, —á—Ç–æ–±—ã —è —Ç–µ–±–µ –∑–∞–¥–∞–ª(–∞) ‚Äî –∏ –∫–∞–∫–æ–π –±—ã–ª –±—ã —Ç–≤–æ–π –æ—Ç–≤–µ—Ç?";

const questions = [
    "–ö–∞–∫–æ–π —Ç–≤–æ–π —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π —Å—Ç—Ä–∞—Ö?",
    "–° –∫–∞–∫–∏–º –∂–∏–≤–æ—Ç–Ω—ã–º —è —É —Ç–µ–±—è –∞—Å—Å–æ—Ü–∏–∏—Ä—É—é—Å—å?",
    "–ï—Å—Ç—å –ª–∏ —É —Ç–µ–±—è –≤ –∂–∏–∑–Ω–∏ —Å–∏—Ç—É–∞—Ü–∏—è, –≥–ª—è–¥—è –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —Å–ø—É—Å—Ç—è –≥–æ–¥—ã —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –∏–Ω–∞—á–µ?",
    "–ß—Ç–æ —Ç—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ—á–µ–Ω—å –ª—é–±–∏—à—å, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –∏ –Ω–µ –≥–æ–≤–æ—Ä–∏—à—å –æ–± —ç—Ç–æ–º –¥—Ä—É–≥–∏–º, –∞ –º–æ–∂–µ—Ç –¥–∞–∂–µ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—à—å –≤–æ–æ–±—â–µ –æ–±—Ä–∞—Ç–Ω–æ–µ?",
    "–ö–∞–∫–∞—è –¥–µ—Ç–∞–ª—å —Ç–µ–±–µ –≤–æ –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –∫–∞–∫ –≤ —á–µ–ª–æ–≤–µ–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—à–µ–≥–æ –æ–±—â–µ–Ω–∏—è?",
    "–ö–∞–∫–æ–π —Ç–µ–æ—Ä–∏–∏ —Ç—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—à—å—Å—è: –ó–µ–º–ª—è –ø–ª–æ—Å–∫–∞—è –∏–ª–∏ —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∞—è (—ç–ª–∏–ø—Å–æ–æ–±—Ä–∞–∑–Ω–∞—è)? –ê–≤—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞: –Æ—Ä–∏–π –õ–æ–∑–∞.",
    "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±–µ —Ç—Ä—É–¥–Ω–µ–µ –≤—Å–µ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç—å –≤—Å–ª—É—Ö –¥–∞–∂–µ –±–ª–∏–∑–∫–∏–º?",
    "–û —á–µ–º —Ç—ã —á–∞—â–µ –≤—Å–µ–≥–æ –¥—É–º–∞–µ—à—å –Ω–æ—á—å—é, –∫–æ–≥–¥–∞ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Ç—Ä–æ–≥–∞–µ—Ç –¥–æ –≥–ª—É–±–∏–Ω—ã, –Ω–æ —Ç—ã —ç—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—à—å?",
    "–ö–∞–∫–æ–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç —Ç–µ–±–µ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ —É—Å–ª—ã—à–∞—Ç—å?",
    "–í —á–µ–º —Ç—ã —á–∞—â–µ –≤—Å–µ–≥–æ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è –≤ —Å–µ–±–µ?",
    "–ß—Ç–æ —Ç–µ–±—è –º–æ–∂–µ—Ç –ø—Ä—è–º–æ –≤–∑–±–µ—Å–∏—Ç—å?",
    "–ß—Ç–æ —Ç–µ–±—è –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç?",
    "–ß—Ç–æ —Ç—ã —Å—á–∏—Ç–∞–µ—à—å —Å–≤–æ–µ–π —Å–∏–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π, –Ω–æ —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å?",
    "–ö–∞–∫–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞ –¥–æ —Å–∏—Ö –ø–æ—Ä —Å —Ç–æ–±–æ–π?",
    "–ö–∞–∫–∞—è —Ç–≤–æ—è –º–∞–ª–µ–Ω—å–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Ç–æ–±–æ–π?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç ¬´—É–≤–∞–∂–µ–Ω–∏–µ¬ª –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö?",
    "–ß—Ç–æ —Ç—ã –Ω–µ —É—Å–ø–µ–ª(–∞) —Å–∫–∞–∑–∞—Ç—å —á–µ–ª–æ–≤–µ–∫—É ‚Äî –∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –ø–æ–º–Ω–∏—à—å?",
    "–ß—Ç–æ —Ç—ã —Å—á–∏—Ç–∞–µ—à—å –Ω–∞—Å—Ç–æ—è—â–µ–π –±–ª–∏–∑–æ—Å—Ç—å—é?",
    "–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –æ—Å–æ–±–µ–Ω–Ω–æ –æ–¥–∏–Ω–æ–∫–æ?",
    "–ö–∞–∫ —Ç—ã –ª—é–±–∏—à—å, —á—Ç–æ–±—ã —Ç–µ–±—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏: —Å–ª–æ–≤–∞–º–∏, –¥–µ–ª–æ–º –∏–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º?",
    "–ß—Ç–æ —Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ—Å–∏—à—å, —Ö–æ—Ç—è —Ç–µ–±–µ —ç—Ç–æ –Ω—É–∂–Ω–æ?",
    "–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Å–ª—ã—à–∞—Ç—å –≤ —Å–≤–æ–π –∞–¥—Ä–µ—Å?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ª—é–±–∏–º–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞?",
    "–ß—Ç–æ —Ç–µ–±–µ –≤–æ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å –≥–ª—É–±–∂–µ?",
    "–ß—Ç–æ —Ç—ã —Ü–µ–Ω–∏—à—å –≤ —á–µ–ª–æ–≤–µ–∫–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
    "–ß—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —è –ø–æ–Ω—è–ª(–∞) –ø—Ä–æ —Ç–µ–±—è –±–µ–∑ –¥–æ–≥–∞–¥–æ–∫ ‚Äî –Ω–∞–ø—Ä—è–º—É—é?",
    "–ß—Ç–æ –≤–æ –º–Ω–µ —Ç–µ–±–µ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–µ–±—è?",
    "–ß—Ç–æ —Ç—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—â–∞–µ—à—å –ª—é–¥—è–º?",
    "–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Ä–µ–≤–Ω–æ—Å—Ç—å –∏ –ø–æ—á–µ–º—É?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ø—Ä–∞–≤–∏–ª–æ –ø–æ –∂–∏–∑–Ω–∏ —Ç—ã –Ω–∞—Ä—É—à–∞–µ—à—å —á–∞—â–µ –≤—Å–µ–≥–æ?",
    "–ß—Ç–æ —Ç—ã —Å—á–∏—Ç–∞–µ—à—å –¥–æ–º–æ–º ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ –∏–ª–∏ —á–µ–ª–æ–≤–µ–∫?",
    "–ö–æ–≥–¥–∞ —Ç–µ–±–µ –ø–ª–æ—Ö–æ, —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —Ç–µ–±—è –æ—Å—Ç–∞–≤–∏–ª–∏ –≤ –ø–æ–∫–æ–µ –∏–ª–∏ –±—ã–ª–∏ —Ä—è–¥–æ–º?",
    "–ß–µ–º—É —Ç—ã —Ö–æ—Ç–µ–ª(–∞) –±—ã –Ω–∞—É—á–∏—Ç—å—Å—è –≥–æ–≤–æ—Ä–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞?",
    "–ö–∞–∫–æ–π, –ø–æ —Ç–≤–æ–µ–º—É –º–Ω–µ–Ω–∏—é, —Ç–≤–æ–π —Å–∞–º—ã–π —Å–∏–ª—å–Ω—ã–π –ø–æ—Å—Ç—É–ø–æ–∫, –∑–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –≥–æ—Ä–¥–∏—à—å—Å—è?"
];

let unusedQuestions = [...questions];
let finalQuestionShown = false;


const questionEl = document.getElementById("question");
const startButton = document.getElementById("startButton");

// –°–ò–ú–í–û–õ–´
const randomChars =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
    "abcdefghijklmnopqrstuvwxyz" +
    "–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø" +
    "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è" +
    "0123456789!@#$%^&*()_+-=[]{}<>?/";

function randomChar() {
    return randomChars[Math.floor(Math.random() * randomChars.length)];
}

// SCRAMBLE
function scrambleText(finalText, duration = 2000) {
    isAnimating = true;

    const length = finalText.length;
    const fixed = Array(length).fill(false);

    const indices = [];
    for (let i = 0; i < length; i++) {
        if (finalText[i] !== " ") indices.push(i);
    }

    for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
    }

    let revealed = 0;
    const startTime = Date.now();

    const interval = setInterval(() => {
        const progress = Math.min((Date.now() - startTime) / duration, 1);
        const target = Math.floor(progress * indices.length);

        while (revealed < target) {
            fixed[indices[revealed]] = true;
            revealed++;
        }

        let output = "";
        for (let i = 0; i < length; i++) {
            if (finalText[i] === " ") {
                output += " ";
            } else if (fixed[i]) {
                output += finalText[i];
            } else {
                output += randomChar();
            }
        }

        questionEl.textContent = output;

        if (progress === 1) {
            clearInterval(interval);
            questionEl.textContent = finalText;
            isAnimating = false;
        }
    }, 30);
}

// –°–õ–ï–î–£–Æ–©–ò–ô –í–û–ü–†–û–°
function nextQuestion() {
    if (isAnimating) return;

    // –µ—Å–ª–∏ –æ–±—ã—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
    if (unusedQuestions.length === 0) {

        // –µ—Å–ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –µ—â—ë –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏
        if (!finalQuestionShown) {
            finalQuestionShown = true;
            scrambleText(finalQuestion);
            return;
        }

        // –µ—Å–ª–∏ —É–∂–µ –±—ã–ª —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å
        questionEl.textContent = "–í—Å—ë! :)";
        questionEl.style.cursor = "default";
        return;
    }

    // –æ–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π –≤–æ–ø—Ä–æ—Å
    const index = Math.floor(Math.random() * unusedQuestions.length);
    const q = unusedQuestions[index];
    unusedQuestions.splice(index, 1);

    scrambleText(q);
}


// –°–û–ë–´–¢–ò–Ø
startButton.addEventListener("click", () => {
    startButton.style.display = "none";
    questionEl.style.display = "block";
    nextQuestion();
});

questionEl.addEventListener("click", nextQuestion);
</script>

</body>
</html>


