<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no,
               viewport-fit=cover">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Questions">

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">

<title>Questions</title>

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
}

/* BODY */
body {
    color: red;
    font-family: Arial, sans-serif;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent; /* ‚ùó —É–±–∏—Ä–∞–µ–º iOS highlight */
}

/* üü• STATUS BAR */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top);
    background: black;
    z-index: 9999;
    pointer-events: none;
}

/* üü• HOME INDICATOR */
body::after {
    content: "";
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: env(safe-area-inset-bottom);
    background: black;
    z-index: 9999;
    pointer-events: none;
}

/* –¶–ï–ù–¢–† */
#container {
    text-align: center;
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

#question {
    font-size: 32px;
    min-height: 80px;
    display: none;
    cursor: pointer;
    user-select: none;
}

/* üî¥ –ö–ù–û–ü–ö–ê ‚Äî –ß–ò–°–¢–´–ô –¢–ï–ö–°–¢ */
button {
    font-size: 24px;
    padding: 20px 50px;
    background: transparent;     /* ‚ùå –Ω–∏–∫–∞–∫–æ–π –∑–∞–ª–∏–≤–∫–∏ */
    color: red;
    border: none;                /* ‚ùå –Ω–∏–∫–∞–∫–æ–π —Ä–∞–º–∫–∏ */
    outline: none;
    cursor: pointer;
}

/* ‚ùå –£–ë–ò–†–ê–ï–ú –í–°–ï ACTIVE / FOCUS –≠–§–§–ï–ö–¢–´ */
button:active,
button:focus,
button:focus-visible {
    background: transparent;
    color: red;
    outline: none;
    box-shadow: none;
}
</style>
</head>

<body>

<div id="container">
    <div id="question"></div>
    <button id="start">–°—Ç–∞—Ä—Ç</button>
</div>

<script>
// –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ iOS-–∑—É–º-–∂–µ—Å—Ç–æ–≤
document.addEventListener('gesturestart', e => e.preventDefault());

// PWA service worker
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
}

// –∫–æ–Ω—Ç–µ–Ω—Ç
const questions = [
    "–ö—Ç–æ —Ç—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?",
    "–ß–µ–≥–æ —Ç—ã –±–æ–∏—à—å—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
    "–ß—Ç–æ –±—ã —Ç—ã –∏–∑–º–µ–Ω–∏–ª –≤ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏?",
    "–ï—Å—Ç—å –ª–∏ —É —Ç–µ–±—è —Å–µ–∫—Ä–µ—Ç?",
    "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º?",
    "–û —á—ë–º —Ç—ã –∂–∞–ª–µ–µ—à—å?",
    "–ö–æ–º—É —Ç—ã –¥–æ–≤–µ—Ä—è–µ—à—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?"
];

let unused = [...questions];
let animating = false;

const chars =
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è0123456789!@#$%^&*";

// –°–ò–ú–í–û–õ–´
const randomChars =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
    "abcdefghijklmnopqrstuvwxyz" +
    "–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø" +
    "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è" +
    "0123456789!@#$%^&*()_+-=[]{}<>?/";

function randChar() {
    return chars[Math.floor(Math.random() * chars.length)];
}

// SCRAMBLE
function scrambleText(finalText, duration = 2000) {
    isAnimating = true;

    const length = finalText.length;
    const fixed = Array(length).fill(false);

    const indices = [];
    for (let i = 0; i < length; i++) {
        if (finalText[i] !== " ") indices.push(i);
    }

    for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [idx[i], idx[j]] = [idx[j], idx[i]];
    }

    let revealed = 0;
    const start = Date.now();

    const timer = setInterval(() => {
        const p = Math.min((Date.now() - start) / duration, 1);
        const target = Math.floor(p * idx.length);

        while (revealed < target) {
            fixed[idx[revealed++]] = true;
        }

        let out = "";
        for (let i = 0; i < len; i++) {
            out += fixed[i] ? text[i] : (text[i] === " " ? " " : randChar());
        }

        qEl.textContent = out;

        if (p === 1) {
            clearInterval(timer);
            qEl.textContent = text;
            animating = false;
        }
    }, 30);
}

// –°–õ–ï–î–£–Æ–©–ò–ô –í–û–ü–†–û–°
function nextQuestion() {
    if (isAnimating) return;

    if (unusedQuestions.length === 0) {
        questionEl.textContent = "–í—Å—ë! :)";
        questionEl.style.cursor = "default";
        return;
    }
    const i = Math.floor(Math.random() * unused.length);
    const q = unused.splice(i, 1)[0];
    scramble(q);
}

startBtn.onclick = () => {
    startBtn.style.display = "none";
    qEl.style.display = "block";
    next();
};

qEl.onclick = next;
</script>

</body>
</html>

